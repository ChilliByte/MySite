<!DOCTYPE HTML>
<HTML>
    <head>
        <title>Dice Simulator</title>
        <link rel="stylesheet" href="layout.css" type="text/css" media="all" />
    </head>
    <body>
        <div class="header">
            Deep Sohelia
            <div id="hr" style="border-top: 1px solid white">
                Candidate Number: 0137 <br />
                Centre Number: 20153 <br />
                Centre Name: King Edward VI Five Ways <br />
                Date: 30/01/2015
            </div>
        </div>
        <div class="text">
            <h1>Dice Simulator</h1>
            <hr />
            <h2>Please select a dice type:</h2><br>
            
            <div class="styled-select">
            <select id="drop">
                <option value="4">4 - Sided</option>
                <option value="6">6 - Sided</option>
                <option value="12">12 - Sided</option>
            </select>
            </div>
            
        <button id="rlbut" onclick="findValue()"> Roll</button> 
        <p id="rolled">Roll The Dice!</p> 
        Record dice rolls?<input type="checkbox" id="checkbox">
        <button onclick="clearLog()">Clear Rolls</button> 
        
        <script>
        var value;
        var diceType;
        var selection = document.getElementById("drop");
        var output = document.getElementById("rolled");
        
        function notifyMe(val,side) {
            if (!Notification) {
                alert('Please us a modern version of Chrome, Firefox, Opera or Firefox.');
                return;
            }

            if (Notification.permission !== "granted")
                Notification.requestPermission();

                var notification = new Notification('Dice Roll Result', {
                    icon:  "http:\/\/www.charactersheet.net\/img\/sixsided.png",
                    body: "You rolled a " + side + "-sided dice and got " + val + "!",
                });


                notification.onclick = function () {
                    window.self.focus()
                }
        }
        
        function findValue() {
            diceType = parseInt(selection.value,10); 
            value = Math.floor((Math.random() * diceType) + 1);
            if (document.getElementById("checkbox").checked) {
                output.innerHTML += "<br />" + "You Rolled a " + value;
            } else {
                output.innerHTML = "You Rolled a " + diceType + "-Sided Dice, and got the number " + value;
            }
            notifyMe(value,diceType);
        };
        function clearLog() {
            output.innerHTML = "";    
        };
        </script>
        
        <hr />
            
        </div>
        
    </body>
</HTML>
